<HTML><HEAD><TITLE>HTK</TITLE></HEAD><BODY bgcolor="#FFFFFF">
<HR>
<DIV align="center"><TABLE cellpadding="2" border="0" cellspacing="2"><TR><TD align="center"><IMG alt="The Lua Language" src="lua.png"></TD></TR><TR><TD align="center"><BIG><B>HTK</B></BIG></TD></TR><TR><TD align="center" valign="top">A library of HTML constructors</TD></TR></TABLE></DIV>
<P align="center">
<A href="#whatis">what is</A>
&middot;
<A href="#download">download</A>
&middot;
<A href="#ref">reference</A>
&middot;
<A href="#ex">examples</A>
&middot;
<A href="#news">news</A>
&middot;
<A href="#implementation">implementation</A>
</P>
<HR>
<H2><A name="whatis">What is HTK?</A></H2>
HTK is a library of 
<A href="http://www.lua.org">Lua</A>
 constructors that create HTML elements.

It was designed to be used within 
<A href="http://www.keplerproject.org/cgilua">CGILua</A>
, a Lua interpreter which provides an appropriate environment to
run CGI scripts written in Lua.
<P>
HTK was developed to provide a structured way to build HTML
pages.
It has an homogeneuos API to all HTML elements despite their own
particularities: all pre-defined form-field values are set with 
<TT>value</TT>
 attribute, even for multi-line fields (built with 
<EM>TEXTAREA</EM>
 constructor) or radio buttons (built with 
<EM>RADIO</EM>
 constructor).
<H2><A name="download">Download and installation</A></H2>
The 
<B>current version</B>
 of HTK source code can be freely downloaded from the following link:
<UL><LI><A href="htk.lua">HTK 3.2.0</A></LI></UL>
You can install it in your LUA_PATH or using 
<A href="http://http://www.luarocks.org/">LuaRocks</A>
.
Older versions can be downloaded too:
<UL><LI><A href="htk-3.1.1.lua">HTK 3.1.1</A></LI><LI><A href="htk-3.1.lua">HTK 3.1</A></LI><LI><A href="htk-3.0.3.lua">HTK 3.0.3</A><SMALL> (Lua 5.1)</SMALL></LI><LI><A href="htk-3.0.2.lua">HTK 3.0.2</A></LI><LI><A href="htk-3.0.1.lua">HTK 3.0.1</A></LI><LI><A href="htk-3.0.lua">HTK 3.0</A><SMALL> (Lua 5.0)</SMALL></LI><LI><A href="htk-2.0.4.lua">HTK 2.0.4</A></LI><LI><A href="htk-2.0.3.lua">HTK 2.0.3</A></LI><LI><A href="htk-2.0.2.lua">HTK 2.0.2</A></LI><LI><A href="htk-2.0.1.lua">HTK 2.0.1</A></LI><LI><A href="htk-2.0.lua">HTK 2.0</A></LI><LI><A href="htk-1.2.lua">HTK 1.2</A></LI><LI><A href="htmltoolkit.lua">HTMLToolkit</A></LI></UL>
<H2><A name="ref">Reference</A></H2>
HTK constructors can be divided in some groups:
<UL><LI><A href="#virtual">Virtual</A></LI><LI><A href="#input">Input</A></LI><LI><A href="#container">Container</A></LI><LI><A href="#compound">Compound</A></LI><LI><A href="#table_cell">Table cells</A></LI><LI><A href="#table_row">Table rows</A></LI><LI><A href="#class_defaults">Default class attribute</A></LI></UL>
<H4><A name="virtual"></A>Virtual Constructors</H4>
<DD></DD>
<TT>htk.FRAME</TT>
 makes a rectangular frame around the elements inside it.
<DD></DD>
<TT>htk.MULTILINE</TT>
 creates a text input element with multiple lines
(the same as a 
<TT>TEXTAREA</TT>
 element).
<H4><A name="input"></A>Input Constructors</H4>
All these constructors are short forms of the 
<TT>INPUT</TT>
 with the 
<EM>type</EM>
 attribute previously set.
<DD></DD>
<TT>htk.BUTTON</TT>
<DD></DD>
<TT>htk.FILE</TT>
<DD></DD>
<TT>htk.HIDDEN</TT>
<DD></DD>
<TT>htk.PASSWORD</TT>
<DD></DD>
<TT>htk.RADIO_BUTTON</TT>
<DD></DD>
<TT>htk.RESET</TT>
<DD></DD>
<TT>htk.SUBMIT</TT>
<DD></DD>
<TT>htk.TEXT</TT>
<DD></DD>
<TT>htk.TOGGLE</TT>
<P>
<H4><A name="container"></A>Container Constructors</H4>
These are constructors that group together some elements of the
same type.
In a group of radio buttons only one of them can be checked;
a group of options compound a selection list.
<DD></DD>
<TT>htk.RADIO</TT>
 creates a group of radio buttons.
<DD></DD>
<TT>htk.TOGGLE_LIST</TT>
 creates a group of toggles.
<DD></DD>
<TT>htk.SELECT</TT>
 creates a selection list.
<P>
<H4><A name="compound"></A>Compound Constructors</H4>
<DD></DD>
<TT>htk.COMPOUND</TT>
 generic combinator of elements.
<DD></DD>
<TT>htk.DATE</TT>
 creates a day-month-year date field:
the day-field is a two-character text field;
the month-field is a selection box;
the year-field is a four-character text field.
The default value format can be "dd/mmm/yyyy" or "yyyy-mm-dd"
<P>
<H4><A name="table_cell"></A>Table Cell Constructors</H4>
Both constructors extends the correspondent HTML elements to accept 
<TT>face</TT>
, 
<TT>size</TT>
 and 
<TT>color</TT>
 attributes and construct a 
<TT>FONT</TT>
 element inside the cell that will receive these attributes.
<DD></DD>
<TT>htk.TD</TT>
<DD></DD>
<TT>htk.TH</TT>
<P>
<H4><A name="table_row"></A>Table Row Constructors</H4>
The following constructors create a table row with two cells,
the left one with a "label" ("
<TT>label</TT>
 attribute) and the right one with the correspondent input element.
<DD></DD>
<TT>htk.DATE_FIELD</TT>
<DD></DD>
<TT>htk.FILE_FIELD</TT>
<DD></DD>
<TT>htk.MULTILINE_FIELD</TT>
<DD></DD>
<TT>htk.PASSWORD_FIELD</TT>
<DD></DD>
<TT>htk.RADIO_FIELD</TT>
<DD></DD>
<TT>htk.SELECT_FIELD</TT>
<DD></DD>
<TT>htk.TEXT_FIELD</TT>
<DD></DD>
<TT>htk.TEXTAREA_FIELD</TT>
<DD></DD>
<TT>htk.TOGGLE_FIELD</TT>
<P>
<H4><A name="class_defaults"></A>Default value for class attribute</H4>
HTK also provides a way to easily add a default value for the 
<I>class</I>
 attribute: the table 
<TT>class_defaults</TT>
 can store the value of the class attribute for each element.
It is indexed by the name of the element and its value will be copied to
the resulting element if there is no definition of the class attribute.
<BR>
For example, the following code:
<PRE>htk.class_defaults.TD = "common"
print (htk.TR {
	htk.TD { "first" },
	htk.TD { "second", class = "special" },
	htk.TD { "third" },
	separator = "\n",
})</PRE>
will generate the following output:
<PRE>&lt;TR&gt;
&lt;TD class="common"&gt;first&lt;/TD&gt;
&lt;TD class="special"&gt;second&lt;/TD&gt;
&lt;TD class="common"&gt;third&lt;/TD&gt;
&lt;/TR&gt;8</PRE>
<P>
<H2><A name="ex">Examples</A></H2>
Here are some small examples of how to use HTK.
The following table show three columns,
the first one with the Lua source code,
the second with the HTML source code generated by the library,
and the third with the rendered HTML code.
<TABLE border><TR><TH><SMALL>Lua source</SMALL></TH><TH><SMALL>HTML generated</SMALL></TH><TH><SMALL>Final result</SMALL></TH></TR><TR><TD class="common"><SMALL><PRE>print(htk.B { "Bold" })</PRE></SMALL></TD><TD class="common"><SMALL><PRE>&lt;B&gt;Bold&lt;/B&gt;</PRE></SMALL></TD><TD class="common"><SMALL><B>Bold</B></SMALL></TD></TR><TR><TD class="common"><SMALL><PRE>print(htk.BIG {
  separator = "\n",
  "A sample ",
  htk.EM { "text" },
  " with some ",
  htk.B { "formatting tags" },
  htk.BR {},
})</PRE></SMALL></TD><TD class="common"><SMALL><PRE>&lt;BIG&gt;
A sample 
&lt;EM&gt;text&lt;/EM&gt;
 with some 
&lt;B&gt;formatting tags&lt;/B&gt;
&lt;BR&gt;
&lt;/BIG&gt;</PRE></SMALL></TD><TD class="common"><SMALL><BIG>
A sample 
<EM>text</EM>
 with some 
<B>formatting tags</B>
<BR>
</BIG></SMALL></TD></TR><TR><TD class="common"><SMALL><PRE>print(htk.FORM {
  method = "POST",
  htk.TABLE {
    separator = "\n",
    border = true,
    htk.TEXT_FIELD {
      label = "Full name",
      separator = "\n",
      name = "name",
      value = "Write your name here",
    },
    htk.RADIO_FIELD {
      label = "Sex",
      separator = "\n",
      name = "sex",
      options = {
        { "Masc.", value = "M" },
        { "Fem.", value = "F" },
      },
    },
  },
})</PRE></SMALL></TD><TD class="common"><SMALL><PRE>&lt;FORM method="POST"&gt;&lt;TABLE border&gt;
&lt;TR&gt;
&lt;TD class="common"&gt;
Full name
&lt;/TD&gt;
&lt;TD class="common"&gt;
&lt;INPUT value="Write your name here" type="text" name="name"&gt;

&lt;/TD&gt;
&lt;/TR&gt;
&lt;TR&gt;
&lt;TD class="common"&gt;
Sex
&lt;/TD&gt;
&lt;TD class="common"&gt;
&lt;INPUT value="M" type="radio" name="sex"&gt;Masc.&lt;/INPUT&gt;&lt;BR&gt;
&lt;INPUT value="F" type="radio" name="sex"&gt;Fem.&lt;/INPUT&gt;&lt;BR&gt;

&lt;/TD&gt;
&lt;/TR&gt;
&lt;/TABLE&gt;&lt;/FORM&gt;</PRE></SMALL></TD><TD class="common"><SMALL><FORM method="POST"><TABLE border>
<TR>
<TD class="common">
Full name
</TD>
<TD class="common">
<INPUT value="Write your name here" type="text" name="name">

</TD>
</TR>
<TR>
<TD class="common">
Sex
</TD>
<TD class="common">
<INPUT value="M" type="radio" name="sex">Masc.</INPUT><BR>
<INPUT value="F" type="radio" name="sex">Fem.</INPUT><BR>

</TD>
</TR>
</TABLE></FORM></SMALL></TD></TR></TABLE>
This page was completely generated by HTK -- is its main test!
The source code of this page can be downloaded by clicking 
<A href="index.lua">here</A>
<P>
<H2><A name="news">News</A></H2>
<UL><LI>3.2.0 [08/nov/2010] Improving option-element attribute definition<BR>Deployment via LuaRocks</LI><LI>3.1.1 [11/may/2007] Bug fix: multiple selected values in checkboxes</LI><LI>3.1 [09/apr/2007] Deprecated constructions removed</LI><LI>3.0.3 [30/may/2006] New version updated to run with Lua 5.1</LI><LI>3.0.2 [25/jan/2006] Bug fix: boolean value in attributes</LI><LI>3.0.1 [24/jan/2006] Using <CODE>module</CODE> function</LI><LI>3.0 [13/out/2003] New version updated to run with Lua 5.0</LI><LI>2.0.4 [21/aug/2003] Bug fix (revisited): multiple selected values</LI><LI>2.0.3 [25/jul/2002] New feature: <A href="#class_defaults">default value for class attribute</A></LI><LI>2.0.2 [25/apr/2002] Bug fix: multiple selected values</LI><LI>2.0.1 [24/oct/2001] Bug fix: closing tags</LI><LI>2.0 [15/oct/2001] Version 2.0 released</LI><LI>1.2 [28/sep/2001] Conforming to <A href="http://www.lua.org/notes/ltn007.html">LTN 007 - Modules & Packages</A></LI><LI>[26/mar/2001] Bug fix on <I>Table Rows</I></LI></UL>
<P>
<H2><A name="implementation">Implementation</A></H2>
Originally, HTK was based on 
<A href="htmltoolkit.lua">HTMLToolkit</A>
, a set of constructors that reflect in Lua exaclty how HTML
elements are built.
This approach brought all HTML's heterogeneity to the toolkit.
For example, a default value of a 
<TT>TEXT</TT>
 field is set by the 
<TT>value</TT>
 attribute, but if the element is a 
<TT>TEXTAREA</TT>
, the field with index 1 must be set with the default value;
also, if the element is a 
<TT>SELECT</TT>
, the corresponding 
<TT>OPTION</TT>
 element of the selection list must have a 
<TT>selected</TT>
 clause.
So, 
<EM>HTK</EM>
 was built to be the homogeneous interface between Lua and HTML.
<P>
But with version 1.X, the programmer must know what constructors
are from HTK and what are the original from HTMLToolkit to write it down
properly.
Now, with version 2.0, HTMLToolkit was eliminated and all its constructors
were incorporated into HTK.
<P>
Another difference to version 2.0 is the way the constructors are
build.  HTMLToolkit has a description table for each HTML element, almost
always with the same contents; and also, the elements are always created
as tables, its contents are checked (for some obligatory fields) and then
the resulting string is created.
Version 1.X of HTK depends on HTMLToolkit so it inherit all its functions.
On version 2.0, HTK incorporated all HTMLToolkit constructors but with
a different approach.
As almost all functions differ only in the name of the tag element,
now they're just one function, with many closures to make the difference.
Also, there are a constructor generator that only build the constructors
when they are called, so only the used constructors are really created.
<P>
All these changes made version 2.0 at about 60% faster than
version 1.0.
Besides, the source code is about a third of the previous version,
making it easier to maintain, despite its complexity.
<P>
<P align="center">
<A href="#whatis">what is</A>
&middot;
<A href="#download">download</A>
&middot;
<A href="#ref">reference</A>
&middot;
<A href="#ex">examples</A>
&middot;
<A href="#news">news</A>
&middot;
<A href="#implementation">implementation</A>
</P>
<HR>
<TABLE align="center">
<TR><TD align="center" class="common"><IMG alt="Created with Vim" src="vim.png"></TD><TD align="center" class="common"> and </TD><TD align="center" class="common"><IMG alt="Best Viewed on Any Browser" src="anybrowser.png"></TD></TR>
<TR><TD align="center" colspan="3" class="common"><SMALL>Last modified by Tomás on <BR>Mon Nov  8 15:48:13 2010</SMALL></TD></TR>
</TABLE>
</BODY></HTML>
